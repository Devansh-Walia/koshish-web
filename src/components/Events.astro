---
import EventCard from './EventCard.astro';
import { events, contact } from '../data/homeData';
---

<!-- Events Portfolio Section -->
<section id="portfolio" class="section-spacing bg-white">
  <div class="container">
    <!-- Section Header -->
    <div class="section-header text-center">
      <h2 class="section-title">Events</h2>
      <p class="section-subtitle">
        Events by Koshish Family
      </p>
    </div>

    <!-- Events Grid -->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      {events.map((event, index) => (
        <div class="fade-in-simple" style={`animation-delay: ${index * 0.05}s;`}>
          <EventCard 
            title={event.title}
            date={event.date}
            image={event.image}
          />
        </div>
      ))}
    </div>
  </div>
</section>

<!-- Contact Section -->
<section id="contact" class="section-spacing bg-grey-50">
  <div class="container">
    <!-- Section Header -->
    <div class="section-header text-center">
      <h2 class="section-title">{contact.heading}</h2>
    </div>

    <!-- Map -->
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">
        <div class="clean-card overflow-hidden">
          <iframe 
            width="100%" 
            height="600" 
            frameborder="0" 
            scrolling="no" 
            marginheight="0" 
            marginwidth="0" 
            src={contact.mapUrl}
            class="w-full"
          ></iframe>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Animate event cards on scroll
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('#portfolio .fade-in-simple').forEach(el => {
    observer.observe(el);
  });
</script>

---
import AnimatedCounter from './AnimatedCounter.astro';

interface Stat {
  value: number | string;
  label: string;
  icon: string;
  suffix?: string;
  prefix?: string;
  animated?: boolean;
}

interface Props {
  stats: Stat[];
  columns?: number;
  bgColor?: string;
}

const { stats, columns = 3, bgColor = 'bg-white' } = Astro.props;

const gridCols = {
  2: 'md:grid-cols-2',
  3: 'md:grid-cols-3',
  4: 'md:grid-cols-4'
}[columns] || 'md:grid-cols-3';
---

<div class={`grid grid-cols-1 ${gridCols} gap-8 text-center`}>
  {stats.map((stat) => (
    <div class={`${bgColor} p-8 rounded-xl shadow-lg`}>
      <div class="text-5xl font-bold mb-4 text-primary">
        {stat.animated && typeof stat.value === 'number' ? (
          <AnimatedCounter 
            targetCount={stat.value}
            suffix={stat.suffix || ''}
            prefix={stat.prefix || ''}
          />
        ) : (
          <span>{stat.prefix || ''}{stat.value}{stat.suffix || ''}</span>
        )}
      </div>
      <p class="text-xl text-grey-600">{stat.label}</p>
      <div class="mt-4">
        <i class={`${stat.icon} text-3xl text-primary/60`}></i>
      </div>
    </div>
  ))}
</div>
